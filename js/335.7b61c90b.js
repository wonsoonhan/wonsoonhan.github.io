"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[335],{997:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-row",{staticClass:"ma-0 pa-0"},[i("v-col",{staticStyle:{display:"block","margin-top":"0px"},attrs:{cols:"auto",id:"leftMenu"}},[[i("v-card",{staticClass:"mx-auto",attrs:{width:"300"}},[i("v-list",[i("v-list-group",{attrs:{value:t.leftMenuGroup.seller,"prepend-icon":"mdi-account-circle"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-title",{attrs:{align:"start"}},[t._v("Payment")])]},proxy:!0}])},[i("v-list-item",{attrs:{id:"report-payment-list"},on:{click:function(e){return t.leftMenuClick("report-payment-list")}}},[i("v-list-item-title",{staticStyle:{"margin-left":"60px"},attrs:{align:"start"}},[t._v("List")])],1)],1)],1),i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.leftMenu("hide")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-swap-horizontal")])],1),i("v-list-item-title",{attrs:{align:"start"}},[t._v("Hidden")])],1)],1)]],2),i("div",[i("v-list-item-icon",{staticStyle:{cursor:"pointer",display:"none"},attrs:{id:"leftMenuHide"},on:{click:function(e){return t.leftMenu("show")}}},[i("v-icon",[t._v("mdi-swap-horizontal")])],1)],1),i("v-col",[i("v-row",[i("v-col",{staticClass:"ma-1 pa-0 flex-grow-0 flex-shrink-0",attrs:{align:"left"}},[i("vue-country-code",{staticStyle:{display:"none"}})],1),i("v-col",{staticClass:"ma-1 pa-0 flex-grow-0 flex-shrink-0",attrs:{align:"left"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({staticStyle:{width:"200px"},attrs:{label:"From","prepend-icon":"mdi-calendar",readonly:"","hide-details":""},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}},"v-text-field",n,!1),a))]}}]),model:{value:t.fromDateMenu,callback:function(e){t.fromDateMenu=e},expression:"fromDateMenu"}},[i("v-date-picker",{on:{input:function(e){t.fromDateMenu=!1}},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1)],1),i("v-col",{staticClass:"ma-1 pa-0 flex-grow-0 flex-shrink-0",attrs:{align:"left"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({staticStyle:{width:"200px"},attrs:{label:"To","prepend-icon":"mdi-calendar",readonly:"","hide-details":""},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}},"v-text-field",n,!1),a))]}}]),model:{value:t.toDateMenu,callback:function(e){t.toDateMenu=e},expression:"toDateMenu"}},[i("v-date-picker",{on:{input:function(e){t.toDateMenu=!1}},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1)],1),i("v-col",{staticClass:"ma-1 pa-0 flex-grow-0 flex-shrink-0"},[i("v-text-field",{ref:"search",staticStyle:{width:"270px",top:"10px"},attrs:{"hide-details":"",label:"Search",placeholder:"Search",dense:"",outlined:""},on:{keyup:t.keyEnter},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),i("v-col",{staticClass:"ma-0 pa-0 flex-grow-0 flex-shrink-0",attrs:{align:"left"}},[i("v-tooltip",{attrs:{top:"",color:"#18A2D9"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-img",t._g(t._b({staticClass:"shrink mt-1 hidden-sm-and-down",staticStyle:{cursor:"pointer",top:"10px"},attrs:{alt:"",contain:"",src:a(5073),width:"40px"},on:{click:function(e){return t.getDataInit()}}},"v-img",s,!1),n))]}}])},[i("span",[t._v("Search")])])],1),i("v-col",{staticClass:"ma-1 pa-1 flex-grow-0 flex-shrink-0"},[t._v("                          ")]),i("v-col",{staticClass:"ma-1 pa-0 flex-grow-0 flex-shrink-0"},[i("v-tooltip",{attrs:{top:"",color:"#18A2D9"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-img",t._g(t._b({staticClass:"shrink mt-1 hidden-sm-and-down",staticStyle:{cursor:"pointer",top:"5px"},attrs:{contain:"",src:a(9325),width:"40px"},on:{click:function(e){return t.getMakeExcel()}}},"v-img",s,!1),n))]}}])},[i("span",[t._v("Download Excel")])])],1)],1),i("v-row",[i("v-col",{staticStyle:{"padding-top":"10px","padding-bottom":"0px"},attrs:{align:"left"}},[t._v(" Total : "+t._s(t.desserts.length)+" / Selected : "+t._s(t.selected.length)+" ")])],1),i("v-row",[i("v-col",[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"item-key":"id","disable-pagination":"","hide-default-footer":"","multi-sort":"","fixed-header":"",height:"100%",id:"dataTableContent"},scopedSlots:t._u([{key:"item",fn:function(e){return[i("tr",{staticStyle:{height:"40px"}},[i("td",{staticStyle:{height:"30px"},attrs:{align:"center"}},[i("input",{staticStyle:{width:"20px",height:"20px"},attrs:{type:"checkbox",name:"item"},on:{change:function(a){return t.setCheck(e.item,a.target.checked)}}})]),i("td",{staticStyle:{height:"30px",cursor:"pointer"},attrs:{align:"start"},on:{click:function(a){return t.getPaymentDetail(e.item)}}},[t._v(t._s(e.item.createdAt))]),i("td",{staticStyle:{height:"30px",cursor:"pointer"},attrs:{align:"start"},on:{click:function(a){return t.getPaymentDetail(e.item)}}},[t._v(t._s(e.item.paymentNo))]),i("td",{staticStyle:{height:"30px",cursor:"pointer"},attrs:{align:"start"},on:{click:function(a){return t.getPaymentDetail(e.item)}}},[t._v(t._s(e.item.paymentName))]),i("td",{staticStyle:{height:"30px",cursor:"pointer"},attrs:{align:"right"},on:{click:function(a){return t.getPaymentDetail(e.item)}}},[t._v("₩ "+t._s(t._f("comma")(e.item.paymentAmount)))]),i("td",{staticStyle:{height:"30px",cursor:"pointer"},attrs:{align:"right"},on:{click:function(a){return t.getPaymentDetail(e.item)}}},[t._v("₩ "+t._s(t._f("comma")(e.item.cancelAmount)))]),i("td",{staticStyle:{height:"30px",cursor:"pointer"},attrs:{align:"right"},on:{click:function(a){return t.getPaymentDetail(e.item)}}},[t._v("₩ "+t._s(t._f("comma")(e.item.finalAmount)))]),i("td",{staticStyle:{height:"30px",cursor:"pointer"},attrs:{align:"center"},on:{click:function(a){return t.getPaymentDetail(e.item)}}},[t._v(t._s(e.item.status))])])]}}])})],1)],1)],1)],1),i("v-dialog",{attrs:{persistent:"","max-width":"1200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticStyle:{display:"none"},attrs:{color:"primary",dark:"",disabled:""}},"v-btn",n,!1),a),[t._v(" Open Dialog ")])]}}]),model:{value:t.paymentDetailDialogShow,callback:function(e){t.paymentDetailDialogShow=e},expression:"paymentDetailDialogShow"}},[i("v-card",[i("v-card-text",[i("v-card-title",{staticClass:"ma-0 pa-0"},[i("span",{staticClass:"text-h5",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[i("b",[t._v("Payment Detail")])])]),i("v-row",[i("v-col",{staticClass:"ma-0 pa-0"},[i("table",{staticStyle:{width:"100%","border-collapse":"collapse"},attrs:{border:"0"}},[i("tr",{staticStyle:{"background-color":"#1BB5F2",height:"50px"}},[i("th",{staticStyle:{"padding-left":"20px",width:"170px"},attrs:{align:"start"}},[t._v("Transaction Date")]),i("th",{staticStyle:{"padding-left":"20px",width:"200px"},attrs:{align:"start"}},[t._v("GEM Master #")]),i("th",{staticStyle:{width:"200px"},attrs:{align:"center"}},[t._v("Consignee")]),i("th",{staticStyle:{"padding-left":"20px"},attrs:{align:"start"}},[t._v("Item")]),i("th",{staticStyle:{width:"150px"},attrs:{align:"center"}},[t._v("GW / VW")]),i("th",{attrs:{align:"center"}},[t._v("Paid")])]),t._l(t.paymentDetail.orders,(function(e){return i("tr",{key:e.id,staticStyle:{height:"50px"}},[i("td",{staticStyle:{"padding-left":"20px"},attrs:{align:"start"}},[t._v(t._s(e.createdAt))]),i("td",{staticStyle:{"padding-left":"20px"},attrs:{align:"start"}},[t._v(t._s(e.gemMasterNo))]),i("td",{attrs:{align:"center"}},[i("div",{staticStyle:{width:"200px",overflow:"hidden","white-space":"nowrap","text-overflow":"clip"}},[t._v(t._s(e.recipientName))]),i("div",{class:t.getCountry(e.recipientAddressCountryCode),staticStyle:{margin:"1px"}}),t._v(" ("+t._s(e.recipientAddressCountryCode)+")")]),i("td",{attrs:{align:"start"}},[i("div",{staticStyle:{width:"300px",overflow:"hidden","white-space":"nowrap","text-overflow":"clip"}},[t._v(t._s(e.mainItemQuantity)+" X "+t._s(e.mainItemName)),i("br"),t._v(" Qty: "+t._s(e.totalItemQuantity)+", Value: "+t._s(t._f("currency")(e.mainItemCurrency))+" "+t._s(t._f("comma")(e.totalItemAmount))+" ")])]),i("td",{attrs:{align:"center"}},[t._v(" "+t._s(e.shipmentActualWeight)+" "),null==e.weightUnit||""==e.weightUnit?i("span",[t._v("kg")]):i("span",[t._v(t._s(e.weightUnit))]),t._v(" / "+t._s(e.shipmentVolumeWeight)+" "),null==e.weightUnit||""==e.weightUnit?i("span",[t._v("kg")]):i("span",[t._v(t._s(e.weightUnit))])]),i("td",{staticStyle:{"padding-right":"10px"},attrs:{align:"right"}},[t._v("₩ "+t._s(t._f("comma")(e.paymentAmount)))])])}))],2),i("table",{directives:[{name:"show",rawName:"v-show",value:"PARTIAL_CANCEL"==t.paymentDetail.status||"CANCEL"==t.paymentDetail.status,expression:"paymentDetail.status == 'PARTIAL_CANCEL' || paymentDetail.status == 'CANCEL'"}],staticStyle:{width:"100%","border-collapse":"collapse","margin-top":"20px"},attrs:{border:"0"}},[i("tr",{staticStyle:{"background-color":"#1BB5F2",height:"50px"}},[i("th",{staticStyle:{"padding-left":"20px",width:"180px"},attrs:{align:"start"}},[t._v("Cancellation Date")]),i("th",{staticStyle:{"padding-left":"20px",width:"200px"},attrs:{align:"start"}},[t._v("GEM Master #")]),i("th",{staticStyle:{"padding-left":"20px",width:"500px"},attrs:{align:"start"}},[t._v("Reason")]),i("th",{staticStyle:{"padding-right":"10px"},attrs:{align:"right"}},[t._v("Cancelled")])]),t._l(t.paymentDetail.cancels,(function(e){return i("tr",{key:e.id,staticStyle:{height:"50px"}},[i("td",{staticStyle:{"padding-left":"20px"},attrs:{align:"start"}},[t._v(t._s(e.canceledAt))]),i("td",{staticStyle:{"padding-left":"20px"},attrs:{align:"start"}},[t._v(t._s(e.gemMasterNo))]),i("td",{staticStyle:{"padding-left":"20px"},attrs:{align:"start"}},[t._v(t._s(e.reason))]),i("td",{staticStyle:{"padding-right":"10px"},attrs:{align:"right"}},[t._v("₩ "+t._s(t._f("comma")(e.amount)))])])}))],2)])],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.paymentDetailOk()}}},[t._v(" Ok ")])],1)],1)],1),i("loadingBarView",{attrs:{setLoadingBar:this.setLoadingBar}})],1)},n=[],s=a(6123),r=a.n(s),o=a(9755),l=a.n(o),d=a(9669),c=a.n(d),h=a(2745),p=a(7554),g=a(9153),m={components:{loadingBarView:g.Z},data(){return{paymentDetailDialogShow:!1,setLoadingBar:{loadingBarDialogShow:!1},leftMenuGroup:{seller:!0,order:!1},fromDate:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fromDateMenu:!1,toDate:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),toDateMenu:!1,searchText:"",paymentDetail:"",selectedTasks:[],selected:[],desserts:[],headers:[{text:"Transaction Date",value:"createdAt",width:"180"},{text:"Payment Key",value:"paymentNo"},{text:"Description",value:"paymentName"},{text:"Paid",value:"paymentAmount",align:"right"},{text:"Cancelled",value:"cancelAmount",align:"right"},{text:"Total",value:"finalAmount",align:"right"},{text:"Status",value:"status",align:"center"}]}},filters:{},computed:{},methods:{getDataInit(){this.setLoadingBar.loadingBarDialogShow=!0,c().get(h.Z.makeAPIUrl("/payments?userType=SELLER&sellerId="+this.$session.get("loginId")+"&startDate="+this.fromDate+"&endDate="+this.toDate+"&keyword="+this.searchText),{headers:{Authorization:this.$session.get("authorization")}}).then((t=>{this.desserts=t.data;for(var e=0;e<this.desserts.length;e++)this.desserts[e].createdAt=h.Z.getYYYMMDD(this.desserts[e].createdAt);this.setLoadingBar.loadingBarDialogShow=!1})).catch((t=>{if(401==t.response.status)return this.$alert(h.Z.messages.login,"","info").then((()=>{this.$router.push("/")})),!1;this.$alert(t.response.data.message,"","info").then((()=>{})),this.setLoadingBar.loadingBarDialogShow=!1}))},getCountry(t){return h.Z.getCountry(t)},paymentDetailOk(){this.paymentDetailDialogShow=!1},leftMenu(t){l()("#leftMenu").hide(),l()("#leftMenuHide").hide(),"show"==t&&l()("#leftMenu").show(),"hide"==t&&l()("#leftMenuHide").show()},getPaymentDetail(t){var e=this;e.setLoadingBar.loadingBarDialogShow=!0,c().get(h.Z.makeAPIUrl("/payments/"+t.id+"/detail"),{headers:{"Content-Type":"application/json",Authorization:this.$session.get("authorization")}}).then((t=>{e.paymentDetail=t.data;for(var a=0;a<e.paymentDetail.orders.length;a++)e.paymentDetail.orders[a].createdAt=h.Z.getYYYMMDD(e.paymentDetail.orders[a].createdAt);for(var i=0;i<t.data.cancels.length;i++)e.paymentDetail.cancels[i].canceledAt=h.Z.getYYYMMDD(e.paymentDetail.cancels[i].canceledAt);e.paymentDetailDialogShow=!0,e.setLoadingBar.loadingBarDialogShow=!1})).catch((t=>{e.setLoadingBar.loadingBarDialogShow=!1,e.$alert(t.response.data.message,"","info").then((()=>{}))}))},setAllCheck(t){var e=t.target.checked;if(this.selected=[],l()('input[name="item"]').prop("checked",e),e)for(var a=0;a<this.desserts.length;a++)this.selected.push(this.desserts[a])},setCheck(t,e){if(e)this.selected.push(t);else{const e=this.selected.indexOf(t);e>-1&&this.selected.splice(e,1)}},keyEnter(t){"Enter"==t.code&&this.getDataInit()},getMakeExcel(){this.selectedTasks=this.selected;var t=this;if(""!=this.selectedTasks){t.setLoadingBar.loadingBarDialogShow=!0;let e=[];for(let t=0;t<this.selectedTasks.length;t++)e.push(this.selectedTasks[t].id);c().get(h.Z.makeAPIUrl("/payments/download?paymentIds="+e),{headers:{"Content-Type":"application/json",Authorization:this.$session.get("authorization")}}).then((e=>{var i=[];i.push(["Transaction Date","Payment Key","Seller Code","Seller","Description","Transaction Paid","Transaction Cancelled","Transaction Total","Gem Master #","Consignee","Item","GW","VW","Paid","Status","Cancelled","Cancellation Date","Reason"]);for(var n=0;n<e.data.length;n++){var s=h.Z.getYYYMMDD(e.data[n].createdAt),o=e.data[n].paymentId,l=e.data[n].sellerCode,d=e.data[n].sellerCompanyName,c=e.data[n].paymentName,g=e.data[n].paymentAmount,m=e.data[n].cancelAmount,u=e.data[n].finalAmount,v=e.data[n].status,f=e.data[n].order.gemMasterNo,y=e.data[n].order.recipientName+" ("+e.data[n].order.recipientAddressCountryCode+")",x=e.data[n].order.totalItemQuantity,_=e.data[n].order.mainItemQuantity+" X "+e.data[n].order.mainItemName+" Qty: "+x+", Value: "+e.data[n].order.mainItemCurrency+" "+e.data[n].order.totalItemAmount,D="";D=null==e.data[n].order.weightUnit||""==e.data[n].order.weightUnit?e.data[n].order.shipmentActualWeight+" kg":e.data[n].order.shipmentActualWeight+" "+e.data[n].order.weightUnit;var w="";w=null==e.data[n].order.weightUnit||""==e.data[n].order.weightUnit?e.data[n].order.shipmentVolumeWeight+" kg":e.data[n].order.shipmentVolumeWeight+" "+e.data[n].order.weightUnit;var k=e.data[n].order.paymentAmount,S="",C="",b="";0!=e.data[n].order.cancelAmount&&(S=h.Z.getYYYMMDD(e.data[n].order.canceledAt),C=e.data[n].order.cancelReason,b=e.data[n].order.cancelAmount),i.push([s,o,l,d,c,g,m,u,f,y,_,D,w,k,v,b,S,C])}const A=a(4105),M=A.utils.book_new(),B=A.utils.aoa_to_sheet(i);A.utils.book_append_sheet(M,B,"GEM_Excel"),A.writeFile(M,"GEM_"+r().get("companyName")+"_PAYMENT_LIST_"+p.Z.nowYYYYmmdd()+".xlsx"),t.setLoadingBar.loadingBarDialogShow=!1})).catch((e=>{t.setLoadingBar.loadingBarDialogShow=!1,t.$alert(e.response.data.message,"","info").then((()=>{}))}))}else this.$alert(h.Z.messages.paymentSelect,"","info").then((()=>{t.setLoadingBar.loadingBarDialogShow=!1}))}},mounted(){if(""==this.$session.get("loginId")||""==this.$session.get("authorization"))return this.$alert(h.Z.messages.login,"","info").then((()=>{this.$router.push("/")})),!1;l()(document).prop("title","Report Management"),l()("#bar_header").attr("style","background-color:#E2E1F1"),l()("#top_header").show(),l()("#topNaviText").text("Report Management"),this.fromDate=p.Z.fromYYYYmmdd(),this.toDate=p.Z.toYYYYmmdd();var t="height:"+String(window.innerHeight-280)+"px";l()("#dataTableContent").children().attr("style",t),l()(".v-data-table-header>").prepend("<th style='width:15px'><input type='checkbox' style='width:20px;height:20px' id='allCheck' name='allCheck'></th>"),this.targetAllCheck=document.querySelector("#allCheck"),this.targetAllCheck.addEventListener("change",this.setAllCheck),this.getDataInit(),l()("#tabBar>div>div>div>div").next().css({"background-color":"#6587CD"}),l()("#tabBar>div>div>div>div").next().next().css({"background-color":"#949494"}),l()("#tabBar>div>div>div>div").next().next().next().css({"background-color":"#949494"}),l()("#tabBar>div>div>div>div").next().next().next().next().css({"background-color":"#949494"}),l()("#tabBar>div>div>div>div").css({"margin-right":"8px"}),l()("#tabBar>div>div>div>div").css({color:"#FFFFFF"})},updated(){l()("#report-payment-list").removeClass("bg-active");let t=window.location.href.split("/"),e=t[t.length-1];l()("#"+e).addClass("bg-active"),l()(".v-data-table-header>tr>th").css({"background-color":"#1BB5F2"}),l()(".v-data-table-header>tr>th").css({"text-align":"center"}),l()(".v-data-table-header>tr>th").css({"font-size":"15px"}),l()(".v-data-table-header>tr>th").css({"font-style":"bold"})}},u=m,v=a(3736),f=a(3453),y=a.n(f),x=a(4741),_=a(5893),D=a(5255),w=a(7024),k=a(1819),S=a(837),C=a(7294),b=a(268),A=a(9088),M=a(1584),B=a(7970),T=a(5384),Z=a(1667),I=a(3560),V=a(3738),L=a(8836),Y=a(7894),E=a(2515),P=a(9007),N=a(4213),U=(0,v.Z)(u,i,n,!1,null,"a2f4371a",null),$=U.exports;y()(U,{VBtn:x.Z,VCard:_.Z,VCardActions:D.h7,VCardText:D.ZB,VCardTitle:D.EB,VCol:w.Z,VContainer:k.Z,VDataTable:S.Z,VDatePicker:C.Z,VDialog:b.Z,VIcon:A.Z,VImg:M.Z,VList:B.Z,VListGroup:T.Z,VListItem:Z.Z,VListItemIcon:I.Z,VListItemTitle:V.V9,VMenu:L.Z,VRow:Y.Z,VSpacer:E.Z,VTextField:P.Z,VTooltip:N.Z})}}]);
//# sourceMappingURL=335.7b61c90b.js.map